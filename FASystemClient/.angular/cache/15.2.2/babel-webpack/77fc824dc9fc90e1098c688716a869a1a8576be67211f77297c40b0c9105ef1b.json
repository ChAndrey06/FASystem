{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { forkJoin, takeUntil } from 'rxjs';\nimport { ToolbarComponent } from '../components';\nimport { DestroyService } from '@core/services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@features/users\";\nimport * as i2 from \"@features/accounts\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"rxjs\";\nexport class MainLayoutComponent {\n  constructor(viewDestroyed$, userState, accountsState, authService, accountsService) {\n    this.viewDestroyed$ = viewDestroyed$;\n    this.userState = userState;\n    this.accountsState = accountsState;\n    this.authService = authService;\n    this.accountsService = accountsService;\n    this.user$ = this.userState.data$;\n    this.accounts$ = this.accountsState.data$;\n  }\n  ngOnInit() {\n    this.authService.update().pipe(takeUntil(this.viewDestroyed$)).subscribe();\n    forkJoin([this.authService.update(), this.accountsService.update()]).pipe(takeUntil(this.viewDestroyed$)).subscribe();\n  }\n}\nMainLayoutComponent.ɵfac = function MainLayoutComponent_Factory(t) {\n  return new (t || MainLayoutComponent)(i0.ɵɵdirectiveInject(DestroyService), i0.ɵɵdirectiveInject(i1.UserState), i0.ɵɵdirectiveInject(i2.AccountsState), i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.AccountsService));\n};\nMainLayoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MainLayoutComponent,\n  selectors: [[\"app-main-layout\"]],\n  standalone: true,\n  features: [i0.ɵɵProvidersFeature([DestroyService]), i0.ɵɵStandaloneFeature],\n  decls: 4,\n  vars: 3,\n  consts: [[3, \"user\"], [1, \"container\"]],\n  template: function MainLayoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-toolbar\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelement(3, \"router-outlet\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"user\", i0.ɵɵpipeBind1(1, 1, ctx.user$));\n    }\n  },\n  dependencies: [CommonModule, i3.AsyncPipe, RouterModule, i4.RouterOutlet, ToolbarComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  padding-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGF5b3V0cy9tYWluLWxheW91dC9tYWluLWxheW91dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDRSxpQkFBQTtBQUFOIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgLmNvbnRhaW5lciB7XG4gICAgICBwYWRkaW5nLXRvcDogMTBweDtcbiAgICB9XG4gICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,QAAQ,EAAcC,SAAS,QAAQ,MAAM;AAEtD,SAASC,gBAAgB,QAAQ,eAAe;AAEhD,SAASC,cAAc,QAAQ,gBAAgB;;;;;;;AA2B/C,OAAM,MAAOC,mBAAmB;EAI9BC,YAC2CC,cAAgC,EACxDC,SAAoB,EACpBC,aAA4B,EAC5BC,WAAwB,EACxBC,eAAgC;IAJR,mBAAc,GAAdJ,cAAc;IACtC,cAAS,GAATC,SAAS;IACT,kBAAa,GAAbC,aAAa;IACb,gBAAW,GAAXC,WAAW;IACX,oBAAe,GAAfC,eAAe;IARlC,UAAK,GAAG,IAAI,CAACH,SAAS,CAACI,KAAK;IAC5B,cAAS,GAAG,IAAI,CAACH,aAAa,CAACG,KAAK;EAQhC;EAEJC,QAAQ;IACN,IAAI,CAACH,WAAW,CAACI,MAAM,EAAE,CACtBC,IAAI,CAACb,SAAS,CAAC,IAAI,CAACK,cAAc,CAAC,CAAC,CACpCS,SAAS,EAAE;IAEdf,QAAQ,CAAC,CAAC,IAAI,CAACS,WAAW,CAACI,MAAM,EAAE,EAAE,IAAI,CAACH,eAAe,CAACG,MAAM,EAAE,CAAC,CAAC,CACjEC,IAAI,CAACb,SAAS,CAAC,IAAI,CAACK,cAAc,CAAC,CAAC,CACpCS,SAAS,EAAE;EAChB;;AApBWX,mBAAmB;mBAAnBA,mBAAmB,uBAKpBD,cAAc;AAAA;AALbC,mBAAmB;QAAnBA,mBAAmB;EAAAY;EAAAC;EAAAC,iCAfnB,CACTf,cAAc,CACf;EAAAgB;EAAAC;EAAAC;EAAAC;IAAA;MAECC,iCAAkD;;MAClDA,8BAAuB;MACrBA,gCAA+B;MACjCA,iBAAM;;;MAHOA,sDAAsB;;;iBATnCzB,YAAY,gBACZC,YAAY,mBAEZG,gBAAgB;EAAAsB;AAAA","names":["CommonModule","RouterModule","forkJoin","takeUntil","ToolbarComponent","DestroyService","MainLayoutComponent","constructor","viewDestroyed$","userState","accountsState","authService","accountsService","data$","ngOnInit","update","pipe","subscribe","selectors","standalone","features","decls","vars","consts","template","i0","styles"],"sourceRoot":"","sources":["/home/eagold/MyFiles/FASystem/FASystemClient/src/app/layouts/main-layout/main-layout.component.ts"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { forkJoin, Observable, takeUntil } from 'rxjs';\n\nimport { ToolbarComponent } from '../components';\nimport { AuthService, UserState } from '@features/users';\nimport { DestroyService } from '@core/services';\nimport { AccountsService, AccountsState } from '@features/accounts';\n\n@Component({\n  selector: 'app-main-layout',\n  standalone: true,\n  imports: [\n    CommonModule,\n    RouterModule,\n\n    ToolbarComponent\n  ],\n  providers: [\n    DestroyService\n  ],\n  template: `\n    <app-toolbar [user]=\"user$ | async\"></app-toolbar>\n    <div class=\"container\">\n      <router-outlet></router-outlet>\n    </div>\n  `,\n  styles: [`\n    .container {\n      padding-top: 10px;\n    }\n  `]\n})\nexport class MainLayoutComponent implements OnInit{\n  user$ = this.userState.data$;\n  accounts$ = this.accountsState.data$;\n\n  constructor(\n    @Inject(DestroyService) private readonly viewDestroyed$: Observable<void>,\n    private readonly userState: UserState,\n    private readonly accountsState: AccountsState,\n    private readonly authService: AuthService,\n    private readonly accountsService: AccountsService\n  ) { }\n\n  ngOnInit(): void {\n    this.authService.update()\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe();\n\n    forkJoin([this.authService.update(), this.accountsService.update()])\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}