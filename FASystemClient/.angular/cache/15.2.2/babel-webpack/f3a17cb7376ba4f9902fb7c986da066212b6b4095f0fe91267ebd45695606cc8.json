{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { DestroyService } from '@core/services';\nimport { Loadable } from '@core/helpers';\nimport { TransactionTypes } from '@features/transactions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@features/transactions\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"rxjs\";\nfunction DetailsComponent_mat_option_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const helmet_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", helmet_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", helmet_r6, \" \");\n  }\n}\nfunction DetailsComponent_mat_option_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetailsComponent_ng_container_53_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const bike_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", bike_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", bike_r8.name, \" \", bike_r8.number, \" \");\n  }\n}\nfunction DetailsComponent_ng_container_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, DetailsComponent_ng_container_53_mat_option_1_Template, 2, 3, \"mat-option\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.bikes.data);\n  }\n}\nfunction DetailsComponent_div_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"mat-checkbox\", 28);\n    i0.ɵɵlistener(\"click\", function DetailsComponent_div_62_Template_mat_checkbox_click_1_listener($event) {\n      return $event.preventDefault();\n    });\n    i0.ɵɵtext(2, \" Is signed \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-checkbox\", 29);\n    i0.ɵɵtext(4, \" Reset signature \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r5.isSigned);\n  }\n}\nexport class DetailsComponent {\n  constructor(viewDestroyed$, formBuilder, transactionsService) {\n    this.viewDestroyed$ = viewDestroyed$;\n    this.formBuilder = formBuilder;\n    this.transactionsService = transactionsService;\n    this.accounts = new Loadable([], false);\n    this.formGroup = this.formBuilder.group({\n      typeId: [TransactionTypes.expense, Validators.required],\n      amount: [null, Validators.required],\n      description: [null, [Validators.required, Validators.maxLength(500)]],\n      categoryId: [null, [Validators.required]],\n      accountId: [null, [Validators.required]]\n    });\n  }\n  ngOnInit() {\n    this.updateBikes();\n    this.bikeNumeSubscribe();\n  }\n  onSubmit(form) {\n    if (form.resetSignature) form.signature = '';\n    this.saveEvent.emit(form);\n    console.log(form);\n  }\n  onBikeSelected(event) {\n    const bike = event.option.value;\n    this.formGroup.patchValue({\n      bikeId: bike.id,\n      bikeName: bike.name,\n      bikeNumber: bike.number\n    });\n  }\n  updateBikes(filter) {\n    this.bikes.isLoading = true;\n    this.bookingsService.searchBikes(filter ?? '').pipe(takeUntil(this.viewDestroyed$)).subscribe({\n      next: data => this.bikes.setData(data),\n      error: error => this.bikes.setError(error)\n    });\n  }\n  bikeNumeSubscribe() {\n    const bikeNumeFC = this.formGroup.get();\n    bikeNumeFC && bikeNumeFC.valueChanges.pipe(takeUntil(this.viewDestroyed$)).subscribe(value => {\n      this.updateBikes(value);\n      console.log(this.formGroup.value, this.formGroup.valid);\n    });\n  }\n  onClearBikeNameClicked() {\n    this.formGroup.patchValue({\n      bikeName: ''\n    });\n  }\n}\nDetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n  return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(DestroyService), i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.TransactionsService));\n};\nDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetailsComponent,\n  selectors: [[\"app-details\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 66,\n  vars: 9,\n  consts: [[1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"element\"], [\"matInput\", \"\", \"placeholder\", \"First name\", \"formControlName\", \"firstName\"], [\"matInput\", \"\", \"placeholder\", \"Last name\", \"formControlName\", \"lastName\"], [\"appearance\", \"fill\", 1, \"element\"], [3, \"rangePicker\"], [\"matStartDate\", \"\", \"formControlName\", \"dateFrom\", \"placeholder\", \"Start date\", 3, \"focus\", \"click\"], [\"matEndDate\", \"\", \"formControlName\", \"dateTo\", \"placeholder\", \"End date\", 3, \"focus\", \"click\"], [\"matIconSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"], [\"type\", \"number\", \"inputmode\", \"decimal\", \"matInput\", \"\", \"placeholder\", \"Price\", \"formControlName\", \"price\"], [\"matInput\", \"\", \"placeholder\", \"Passport\", \"formControlName\", \"passport\"], [\"matInput\", \"\", \"placeholder\", \"License number\", \"formControlName\", \"licenseNumber\"], [\"matInput\", \"\", \"placeholder\", \"Address\", \"formControlName\", \"address\"], [\"matInput\", \"\", \"placeholder\", \"Nationality\", \"formControlName\", \"nationality\"], [\"placeholder\", \"Helmet\", \"formControlName\", \"helmet\", \"required\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"placeholder\", \"Bike name\", \"formControlName\", \"bikeName\", 3, \"matAutocomplete\"], [\"type\", \"button\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"click\"], [3, \"optionSelected\"], [\"autocomplete\", \"matAutocomplete\"], [4, \"ngIf\"], [\"matInput\", \"\", \"placeholder\", \"Bike number\", \"formControlName\", \"bikeNumber\"], [\"matInput\", \"\", \"placeholder\", \"Phone\", \"formControlName\", \"phone\"], [\"class\", \"element space-around\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 1, \"sbumit-button\", 3, \"disabled\"], [3, \"value\"], [1, \"element\", \"space-around\"], [\"color\", \"primary\", 3, \"checked\", \"click\"], [\"color\", \"primary\", \"formControlName\", \"resetSignature\"]],\n  template: function DetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r10 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function DetailsComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.onSubmit(ctx.formGroup.value);\n      });\n      i0.ɵɵelementStart(1, \"mat-form-field\", 1)(2, \"mat-label\");\n      i0.ɵɵtext(3, \"First name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-form-field\", 1)(6, \"mat-label\");\n      i0.ɵɵtext(7, \"Last name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"mat-form-field\", 4)(10, \"mat-label\");\n      i0.ɵɵtext(11, \"Date range\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"mat-date-range-input\", 5)(13, \"input\", 6);\n      i0.ɵɵlistener(\"focus\", function DetailsComponent_Template_input_focus_13_listener() {\n        i0.ɵɵrestoreView(_r10);\n        const _r0 = i0.ɵɵreference(17);\n        return i0.ɵɵresetView(_r0.open());\n      })(\"click\", function DetailsComponent_Template_input_click_13_listener() {\n        i0.ɵɵrestoreView(_r10);\n        const _r0 = i0.ɵɵreference(17);\n        return i0.ɵɵresetView(_r0.open());\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 7);\n      i0.ɵɵlistener(\"focus\", function DetailsComponent_Template_input_focus_14_listener() {\n        i0.ɵɵrestoreView(_r10);\n        const _r0 = i0.ɵɵreference(17);\n        return i0.ɵɵresetView(_r0.open());\n      })(\"click\", function DetailsComponent_Template_input_click_14_listener() {\n        i0.ɵɵrestoreView(_r10);\n        const _r0 = i0.ɵɵreference(17);\n        return i0.ɵɵresetView(_r0.open());\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(15, \"mat-datepicker-toggle\", 8)(16, \"mat-date-range-picker\", null, 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"mat-form-field\", 1)(19, \"mat-label\");\n      i0.ɵɵtext(20, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"mat-form-field\", 1)(23, \"mat-label\");\n      i0.ɵɵtext(24, \"Passport\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"mat-form-field\", 1)(27, \"mat-label\");\n      i0.ɵɵtext(28, \"License number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(29, \"input\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"mat-form-field\", 1)(31, \"mat-label\");\n      i0.ɵɵtext(32, \"Address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"mat-form-field\", 1)(35, \"mat-label\");\n      i0.ɵɵtext(36, \"Nationality\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(37, \"input\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"mat-form-field\", 4)(39, \"mat-label\");\n      i0.ɵɵtext(40, \"Helmet\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"mat-select\", 15);\n      i0.ɵɵtemplate(42, DetailsComponent_mat_option_42_Template, 2, 2, \"mat-option\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"mat-form-field\", 1)(44, \"mat-label\");\n      i0.ɵɵtext(45, \"Bike name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(46, \"input\", 17);\n      i0.ɵɵelementStart(47, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function DetailsComponent_Template_button_click_47_listener() {\n        return ctx.onClearBikeNameClicked();\n      });\n      i0.ɵɵelementStart(48, \"mat-icon\");\n      i0.ɵɵtext(49, \"close\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(50, \"mat-autocomplete\", 19, 20);\n      i0.ɵɵlistener(\"optionSelected\", function DetailsComponent_Template_mat_autocomplete_optionSelected_50_listener($event) {\n        return ctx.onBikeSelected($event);\n      });\n      i0.ɵɵtemplate(52, DetailsComponent_mat_option_52_Template, 2, 0, \"mat-option\", 21);\n      i0.ɵɵtemplate(53, DetailsComponent_ng_container_53_Template, 2, 1, \"ng-container\", 21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(54, \"mat-form-field\", 1)(55, \"mat-label\");\n      i0.ɵɵtext(56, \"Bike number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(57, \"input\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"mat-form-field\", 1)(59, \"mat-label\");\n      i0.ɵɵtext(60, \"Phone\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(61, \"input\", 23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(62, DetailsComponent_div_62_Template, 5, 1, \"div\", 24);\n      i0.ɵɵelementStart(63, \"div\", 1)(64, \"button\", 25);\n      i0.ɵɵtext(65, \" Save \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(17);\n      const _r2 = i0.ɵɵreference(51);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"rangePicker\", _r0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"for\", _r0);\n      i0.ɵɵadvance(27);\n      i0.ɵɵproperty(\"ngForOf\", ctx.helmets);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"matAutocomplete\", _r2);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.bikes.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.bikes.isLoading);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.booking);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !(ctx.formGroup.valid && ctx.formGroup.dirty));\n    }\n  },\n  dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, ReactiveFormsModule, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,YAAY,QAAQ,iBAAiB;AAC9C,SAAiCC,WAAW,EAAEC,mBAAmB,EAAEC,UAAU,QAAQ,gBAAgB;AAIrG,SAASC,cAAc,QAAQ,gBAAgB;AAE/C,SAA2BC,QAAQ,QAAQ,eAAe;AAC1D,SAA0DC,gBAAgB,QAAQ,wBAAwB;;;;;;;;ICyCpGC,sCAA4D;IAC1DA,YACF;IAAAA,iBAAa;;;;IAF8BA,iCAAgB;IACzDA,eACF;IADEA,0CACF;;;;;IAqBAA,kCAAoC;IAAAA,0BAAU;IAAAA,iBAAa;;;;;IAEzDA,sCAA2D;IACzDA,YACF;IAAAA,iBAAa;;;;IAF+BA,+BAAc;IACxDA,eACF;IADEA,kEACF;;;;;IAHFA,6BAAuC;IACrCA,gGAEa;IACfA,0BAAe;;;;IAHgBA,eAAa;IAAbA,2CAAa;;;;;IAiBhDA,+BAAkD;IACGA;MAAA,OAASC,uBAAuB;IAAA,EAAC;IAClFD,2BACF;IAAAA,iBAAe;IACfA,wCAA+D;IAC7DA,iCACF;IAAAA,iBAAe;;;;IALeA,eAAoB;IAApBA,yCAAoB;;;ADvEtD,OAAM,MAAOE,gBAAgB;EAW3BC,YAC2CC,cAAgC,EACxDC,WAAwB,EACxBC,mBAAwC;IAFhB,mBAAc,GAAdF,cAAc;IACtC,gBAAW,GAAXC,WAAW;IACX,wBAAmB,GAAnBC,mBAAmB;IAbtC,aAAQ,GAAG,IAAIR,QAAQ,CAAqB,EAAE,EAAE,KAAK,CAAC;IAEtD,cAAS,GAAc,IAAI,CAACO,WAAW,CAACE,KAAK,CAA+C;MAC1FC,MAAM,EAAE,CAACT,gBAAgB,CAACU,OAAO,EAAEb,UAAU,CAACc,QAAQ,CAAC;MACvDC,MAAM,EAAE,CAAC,IAAI,EAAEf,UAAU,CAACc,QAAQ,CAAC;MACnCE,WAAW,EAAE,CAAC,IAAI,EAAE,CAAChB,UAAU,CAACc,QAAQ,EAAEd,UAAU,CAACiB,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;MACrEC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAClB,UAAU,CAACc,QAAQ,CAAC,CAAC;MACzCK,SAAS,EAAE,CAAC,IAAI,EAAE,CAACnB,UAAU,CAACc,QAAQ,CAAC;KACxC,CAAC;EAME;EAEJM,QAAQ;IACN,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAC,QAAQ,CAACC,IAAS;IAChB,IAAIA,IAAI,CAACC,cAAc,EAAED,IAAI,CAACE,SAAS,GAAG,EAAE;IAE5C,IAAI,CAACC,SAAS,CAACC,IAAI,CAACJ,IAA8B,CAAC;IACnDK,OAAO,CAACC,GAAG,CAACN,IAA8B,CAAC;EAC7C;EAEAO,cAAc,CAACC,KAAmC;IAChD,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK;IAC/B,IAAI,CAACC,SAAS,CAACC,UAAU,CAAC;MACxBC,MAAM,EAAEL,IAAI,CAACM,EAAE;MACfC,QAAQ,EAAEP,IAAI,CAACQ,IAAI;MACnBC,UAAU,EAAET,IAAI,CAACU;KAClB,CAAC;EACJ;EAEAtB,WAAW,CAACuB,MAAe;IACzB,IAAI,CAACC,KAAK,CAACC,SAAS,GAAG,IAAI;IAC3B,IAAI,CAACC,eAAe,CAACC,WAAW,CAACJ,MAAM,IAAI,EAAE,CAAC,CAC3CK,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC1C,cAAc,CAAC,CAAC,CACpC2C,SAAS,CAAC;MACTC,IAAI,EAAEC,IAAI,IAAI,IAAI,CAACR,KAAK,CAACS,OAAO,CAACD,IAAI,CAAC;MACtCE,KAAK,EAAEA,KAAK,IAAI,IAAI,CAACV,KAAK,CAACW,QAAQ,CAACD,KAAK;KAC1C,CAAC;EACN;EAEAjC,iBAAiB;IACf,MAAMmC,UAAU,GAAG,IAAI,CAACrB,SAAS,CAACsB,GAAG,EAAY;IAEjDD,UAAU,IAAIA,UAAU,CAACE,YAAY,CAClCV,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC1C,cAAc,CAAC,CAAC,CACpC2C,SAAS,CAAChB,KAAK,IAAG;MACjB,IAAI,CAACd,WAAW,CAACc,KAAK,CAAC;MACvBN,OAAO,CAACC,GAAG,CAAC,IAAI,CAACM,SAAS,CAACD,KAAK,EAAE,IAAI,CAACC,SAAS,CAACwB,KAAK,CAAC;IACzD,CAAC,CAAC;EACN;EAEAC,sBAAsB;IACpB,IAAI,CAACzB,SAAS,CAACC,UAAU,CAAC;MAAEG,QAAQ,EAAE;IAAE,CAAE,CAAC;EAC7C;;AA7DWlC,gBAAgB;mBAAhBA,gBAAgB,uBAYjBL,cAAc;AAAA;AAZbK,gBAAgB;QAAhBA,gBAAgB;EAAAwD;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCtB7BhE,+BAAkF;MAApDA;QAAA,OAAYiE,iCAAyB;MAAA,EAAC;MAClEjE,yCAAgC;MACnBA,0BAAU;MAAAA,iBAAY;MACjCA,2BAAqE;MACvEA,iBAAiB;MAEjBA,yCAAgC;MACnBA,yBAAS;MAAAA,iBAAY;MAChCA,2BAAmE;MACrEA,iBAAiB;MAEjBA,yCAAkD;MACrCA,2BAAU;MAAAA,iBAAY;MACjCA,gDAA6C;MAC6BA;QAAAA;QAAA;QAAA,OAASA,yBAAa;MAAA,EAAC;QAAAA;QAAA;QAAA,OACpFA,yBAAa;MAAA,EADuE;MAA/FA,iBAC0B;MAC1BA,iCAAkH;MAAhDA;QAAAA;QAAA;QAAA,OAASA,yBAAa;MAAA,EAAC;QAAAA;QAAA;QAAA,OAAUA,yBAAa;MAAA,EAAvB;MAAzFA,iBAAkH;MAEpHA,4CAA4E;MAE9EA,iBAAiB;MAEjBA,0CAAgC;MACnBA,sBAAK;MAAAA,iBAAY;MAC5BA,6BAA8F;MAChGA,iBAAiB;MAEjBA,0CAAgC;MACnBA,yBAAQ;MAAAA,iBAAY;MAC/BA,6BAAkE;MACpEA,iBAAiB;MAEjBA,0CAAgC;MACnBA,+BAAc;MAAAA,iBAAY;MACrCA,6BAA6E;MAC/EA,iBAAiB;MAEjBA,0CAAgC;MACnBA,wBAAO;MAAAA,iBAAY;MAC9BA,6BAAgE;MAClEA,iBAAiB;MAEjBA,0CAAgC;MACnBA,4BAAW;MAAAA,iBAAY;MAClCA,6BAAwE;MAC1EA,iBAAiB;MAEjBA,0CAAkD;MACrCA,uBAAM;MAAAA,iBAAY;MAC7BA,uCAAmE;MACjEA,kFAEa;MACfA,iBAAa;MAGfA,0CAAgC;MACnBA,0BAAS;MAAAA,iBAAY;MAChCA,6BAKC;MAEDA,mCAAsG;MAAnCA;QAAA,OAASiE,4BAAwB;MAAA,EAAC;MACnGjE,iCAAU;MAAAA,sBAAK;MAAAA,iBAAW;MAG5BA,iDAGC;MADCA;QAAA,OAAkBiE,0BAAsB;MAAA,EAAC;MAEzCjE,kFAA2D;MAC3DA,sFAIe;MACjBA,iBAAmB;MAGrBA,0CAAgC;MACnBA,4BAAW;MAAAA,iBAAY;MAClCA,6BAAuE;MACzEA,iBAAiB;MAEjBA,0CAAgC;MACnBA,sBAAK;MAAAA,iBAAY;MAC5BA,6BAA4D;MAC9DA,iBAAiB;MAEjBA,oEAOM;MAENA,+BAAqB;MAIjBA,uBACF;MAAAA,iBAAS;;;;;MA1GPA,yCAAuB;MAaHA,gBAAsB;MAAtBA,iCAAsB;MAKPA,eAAc;MAAdA,yBAAc;MAgClBA,gBAAU;MAAVA,qCAAU;MAYzCA,eAAgC;MAAhCA,qCAAgC;MAWnBA,eAAqB;MAArBA,0CAAqB;MACnBA,eAAsB;MAAtBA,2CAAsB;MAkBNA,eAAa;MAAbA,kCAAa;MAW5CA,eAAkD;MAAlDA,wEAAkD;;;iBDxFpDP,YAAY,uBACZC,WAAW,wIACXC,mBAAmB;EAAAuE;AAAA","names":["CommonModule","FormsModule","ReactiveFormsModule","Validators","DestroyService","Loadable","TransactionTypes","i0","$event","DetailsComponent","constructor","viewDestroyed$","formBuilder","transactionsService","group","typeId","expense","required","amount","description","maxLength","categoryId","accountId","ngOnInit","updateBikes","bikeNumeSubscribe","onSubmit","form","resetSignature","signature","saveEvent","emit","console","log","onBikeSelected","event","bike","option","value","formGroup","patchValue","bikeId","id","bikeName","name","bikeNumber","number","filter","bikes","isLoading","bookingsService","searchBikes","pipe","takeUntil","subscribe","next","data","setData","error","setError","bikeNumeFC","get","valueChanges","valid","onClearBikeNameClicked","selectors","standalone","features","decls","vars","consts","template","ctx","styles"],"sourceRoot":"","sources":["/home/eagold/MyFiles/FASystem/FASystemClient/src/app/pages/expenses/details/details.component.ts","/home/eagold/MyFiles/FASystem/FASystemClient/src/app/pages/expenses/details/details.component.html"],"sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\n\nimport { Observable } from 'rxjs';\n\nimport { DestroyService } from '@core/services';\nimport { AccountInterface } from '@features/accounts';\nimport { ControlConfigMap, Loadable } from '@core/helpers';\nimport { TransactionCreateInterface, TransactionsService, TransactionTypes } from '@features/transactions';\n\n@Component({\n  selector: 'app-details',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  templateUrl: './details.component.html',\n  styleUrls: ['./details.component.scss']\n})\nexport class DetailsComponent {\n  accounts = new Loadable<AccountInterface[]>([], false);\n\n  formGroup: FormGroup = this.formBuilder.group<ControlConfigMap<TransactionCreateInterface>>({\n    typeId: [TransactionTypes.expense, Validators.required],\n    amount: [null, Validators.required],\n    description: [null, [Validators.required, Validators.maxLength(500)]],\n    categoryId: [null, [Validators.required]],\n    accountId: [null, [Validators.required]]\n  });\n\n  constructor(\n    @Inject(DestroyService) private readonly viewDestroyed$: Observable<void>,\n    private readonly formBuilder: FormBuilder,\n    private readonly transactionsService: TransactionsService,\n  ) { }\n  \n  ngOnInit(): void {\n    this.updateBikes();\n    this.bikeNumeSubscribe();\n  }\n\n  onSubmit(form: any) {\n    if (form.resetSignature) form.signature = '';\n\n    this.saveEvent.emit(form as BookingCreateInterface);\n    console.log(form as BookingCreateInterface);\n  }\n\n  onBikeSelected(event: MatAutocompleteSelectedEvent): void {\n    const bike = event.option.value;\n    this.formGroup.patchValue({\n      bikeId: bike.id,\n      bikeName: bike.name,\n      bikeNumber: bike.number\n    });\n  }\n\n  updateBikes(filter?: string) {\n    this.bikes.isLoading = true;\n    this.bookingsService.searchBikes(filter ?? '')\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe({\n        next: data => this.bikes.setData(data),\n        error: error => this.bikes.setError(error)\n      });\n  }\n\n  bikeNumeSubscribe(): void {\n    const bikeNumeFC = this.formGroup.get<'typeId'>();\n\n    bikeNumeFC && bikeNumeFC.valueChanges\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe(value => {\n        this.updateBikes(value);\n        console.log(this.formGroup.value, this.formGroup.valid);\n      });\n  }\n\n  onClearBikeNameClicked(): void {\n    this.formGroup.patchValue({ bikeName: '' });\n  }\n}\n","<form [formGroup]=\"formGroup\" (ngSubmit)=\"onSubmit(formGroup.value)\" class=\"form\">\n  <mat-form-field class=\"element\">\n    <mat-label>First name</mat-label>\n    <input matInput placeholder=\"First name\" formControlName=\"firstName\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Last name</mat-label>\n    <input matInput placeholder=\"Last name\" formControlName=\"lastName\">\n  </mat-form-field>\n\n  <mat-form-field appearance=\"fill\" class=\"element\">\n    <mat-label>Date range</mat-label>\n    <mat-date-range-input [rangePicker]=\"picker\">\n      <input matStartDate formControlName=\"dateFrom\" placeholder=\"Start date\" (focus)=\"picker.open()\"\n        (click)=\"picker.open()\">\n      <input matEndDate formControlName=\"dateTo\" placeholder=\"End date\" (focus)=\"picker.open()\" (click)=\"picker.open()\">\n    </mat-date-range-input>\n    <mat-datepicker-toggle matIconSuffix [for]=\"picker\"></mat-datepicker-toggle>\n    <mat-date-range-picker #picker></mat-date-range-picker>\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Price</mat-label>\n    <input type=\"number\" inputmode=\"decimal\" matInput placeholder=\"Price\" formControlName=\"price\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Passport</mat-label>\n    <input matInput placeholder=\"Passport\" formControlName=\"passport\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>License number</mat-label>\n    <input matInput placeholder=\"License number\" formControlName=\"licenseNumber\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Address</mat-label>\n    <input matInput placeholder=\"Address\" formControlName=\"address\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Nationality</mat-label>\n    <input matInput placeholder=\"Nationality\" formControlName=\"nationality\">\n  </mat-form-field>\n\n  <mat-form-field appearance=\"fill\" class=\"element\">\n    <mat-label>Helmet</mat-label>\n    <mat-select placeholder=\"Helmet\" formControlName=\"helmet\" required>\n      <mat-option *ngFor=\"let helmet of helmets\" [value]=\"helmet\">\n        {{helmet}}\n      </mat-option>\n    </mat-select>\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Bike name</mat-label>\n    <input \n      matInput \n      placeholder=\"Bike name\" \n      formControlName=\"bikeName\"\n      [matAutocomplete]=\"autocomplete\"\n    >\n\n    <button type=\"button\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"onClearBikeNameClicked()\">\n      <mat-icon>close</mat-icon>\n    </button>\n\n    <mat-autocomplete \n      #autocomplete=\"matAutocomplete\" \n      (optionSelected)=\"onBikeSelected($event)\"\n    >\n      <mat-option *ngIf=\"bikes.isLoading\">Loading...</mat-option>\n      <ng-container *ngIf=\"!bikes.isLoading\">\n        <mat-option *ngFor=\"let bike of bikes.data\" [value]=\"bike\">\n          {{bike.name}} {{bike.number}}\n        </mat-option>\n      </ng-container>\n    </mat-autocomplete>\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Bike number</mat-label>\n    <input matInput placeholder=\"Bike number\" formControlName=\"bikeNumber\">\n  </mat-form-field>\n\n  <mat-form-field class=\"element\">\n    <mat-label>Phone</mat-label>\n    <input matInput placeholder=\"Phone\" formControlName=\"phone\">\n  </mat-form-field>\n\n  <div class=\"element space-around\" *ngIf=\"booking\">\n    <mat-checkbox color=\"primary\" [checked]=\"isSigned\" (click)=\"$event.preventDefault()\">\n      Is signed\n    </mat-checkbox>\n    <mat-checkbox color=\"primary\" formControlName=\"resetSignature\">\n      Reset signature\n    </mat-checkbox>\n  </div>\n\n  <div class=\"element\">\n    <button mat-raised-button color=\"primary\" type=\"submit\" class=\"sbumit-button\"\n      [disabled]=\"!(formGroup.valid && formGroup.dirty)\"\n    >\n      Save\n    </button>\n  </div>\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}