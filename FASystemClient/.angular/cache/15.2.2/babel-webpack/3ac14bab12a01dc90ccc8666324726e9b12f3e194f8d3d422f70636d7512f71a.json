{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { takeUntil } from 'rxjs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { DestroyService } from '@core/services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@features/users\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/toolbar\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"rxjs\";\nfunction ToolbarComponent_div_7_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 6);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const account_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(account_r4.balance);\n  }\n}\nfunction ToolbarComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6);\n    i0.ɵɵtemplate(2, ToolbarComponent_div_7_ng_container_2_Template, 3, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.accounts);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.user.name, \" - \", ctx_r0.user.login, \" \");\n  }\n}\nfunction ToolbarComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ToolbarComponent_ng_container_8_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onLogoutClicked());\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"logout\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ToolbarComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ToolbarComponent_ng_container_9_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onLoginClicked());\n    });\n    i0.ɵɵelementStart(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nexport class ToolbarComponent {\n  constructor(viewDestroyed$, router, authService) {\n    this.viewDestroyed$ = viewDestroyed$;\n    this.router = router;\n    this.authService = authService;\n    this.user = null;\n    this.accounts = [];\n  }\n  onLoginClicked() {\n    this.router.navigate(['login']);\n  }\n  onLogoutClicked() {\n    this.authService.logout().pipe(takeUntil(this.viewDestroyed$)).subscribe(() => {\n      this.router.navigate(['']);\n    });\n  }\n  get isLoggedIn() {\n    return this.user != null;\n  }\n}\nToolbarComponent.ɵfac = function ToolbarComponent_Factory(t) {\n  return new (t || ToolbarComponent)(i0.ɵɵdirectiveInject(DestroyService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n};\nToolbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ToolbarComponent,\n  selectors: [[\"app-toolbar\"]],\n  inputs: {\n    user: \"user\",\n    accounts: \"accounts\"\n  },\n  standalone: true,\n  features: [i0.ɵɵProvidersFeature([DestroyService]), i0.ɵɵStandaloneFeature],\n  decls: 10,\n  vars: 3,\n  consts: [[\"color\", \"primary\"], [\"mat-icon-button\", \"\"], [1, \"spaicer\"], [\"class\", \"content\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"content\"], [1, \"accounts\"], [\"class\", \"accounts\", 4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", 3, \"click\"]],\n  template: function ToolbarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"button\", 1)(2, \"mat-icon\");\n      i0.ɵɵtext(3, \"menu\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"span\");\n      i0.ɵɵtext(5, \"FASystem\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"span\", 2);\n      i0.ɵɵtemplate(7, ToolbarComponent_div_7_Template, 5, 3, \"div\", 3);\n      i0.ɵɵtemplate(8, ToolbarComponent_ng_container_8_Template, 4, 0, \"ng-container\", 4);\n      i0.ɵɵtemplate(9, ToolbarComponent_ng_container_9_Template, 6, 0, \"ng-container\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.user && ctx.accounts);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n    }\n  },\n  dependencies: [CommonModule, i3.NgForOf, i3.NgIf, MatToolbarModule, i4.MatToolbar, MatIconModule, i5.MatIcon, MatButtonModule, i6.MatIconButton],\n  styles: [\".spaicer[_ngcontent-%COMP%] {\\n  flex: 1 1 auto;\\n}\\n\\n.content[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGF5b3V0cy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbGJhci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSxTQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuc3BhaWNlciB7XG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuXG4uY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogMTBweDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,YAAY,QAAQ,iBAAiB;AAG9C,SAASC,SAAS,QAAoB,MAAM;AAE5C,SAASC,gBAAgB,QAAQ,2BAA2B;AAC5D,SAASC,aAAa,QAAQ,wBAAwB;AACtD,SAASC,eAAe,QAAQ,0BAA0B;AAG1D,SAASC,cAAc,QAAQ,gBAAgB;;;;;;;;;;;ICHzCC,gCAAgE;IAC9DA,2BAAK;IAAAA,YAAmB;IAAAA,iBAAM;IAChCA,0BAAe;;;;IADRA,eAAmB;IAAnBA,wCAAmB;;;;;IAH9BA,8BAA8C;IAE1CA,yFAEe;IACjBA,iBAAM;IACNA,2BAAK;IACHA,YACF;IAAAA,iBAAM;;;;IAN8BA,eAAW;IAAXA,yCAAW;IAK7CA,eACF;IADEA,2EACF;;;;;;IAEFA,6BAAiC;IAC/BA,iCAAoD;IAA5CA;MAAAA;MAAA;MAAA,OAASA,uCAAiB;IAAA,EAAC;IACjCA,gCAAU;IAAAA,sBAAM;IAAAA,iBAAW;IAE/BA,0BAAe;;;;;;IACfA,6BAAkC;IAChCA,4BAAM;IAAAA,qBAAK;IAAAA,iBAAO;IAClBA,iCAAmD;IAA3CA;MAAAA;MAAA;MAAA,OAASA,sCAAgB;IAAA,EAAC;IAChCA,gCAAU;IAAAA,qBAAK;IAAAA,iBAAW;IAE9BA,0BAAe;;;ADSjB,OAAM,MAAOC,gBAAgB;EAI3BC,YAC2CC,cAAgC,EACxDC,MAAc,EACdC,WAAwB;IAFA,mBAAc,GAAdF,cAAc;IACtC,WAAM,GAANC,MAAM;IACN,gBAAW,GAAXC,WAAW;IANrB,SAAI,GAAyB,IAAI;IACjC,aAAQ,GAA8B,EAAE;EAM7C;EAEJC,cAAc;IACZ,IAAI,CAACF,MAAM,CAACG,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;EAEAC,eAAe;IACb,IAAI,CAACH,WAAW,CAACI,MAAM,EAAE,CACtBC,IAAI,CAACf,SAAS,CAAC,IAAI,CAACQ,cAAc,CAAC,CAAC,CACpCQ,SAAS,CAAC,MAAK;MACd,IAAI,CAACP,MAAM,CAACG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC,CAAC;EACN;EAEA,IAAIK,UAAU;IACZ,OAAO,IAAI,CAACC,IAAI,IAAI,IAAI;EAC1B;;AAxBWZ,gBAAgB;mBAAhBA,gBAAgB,uBAKjBF,cAAc;AAAA;AALbE,gBAAgB;QAAhBA,gBAAgB;EAAAa;EAAAC;IAAAF;IAAAG;EAAA;EAAAC;EAAAC,iCARhB,CACTnB,cAAc,CACf;EAAAoB;EAAAC;EAAAC;EAAAC;IAAA;MC7BHtB,sCAA6B;MAEfA,oBAAI;MAAAA,iBAAW;MAE3BA,4BAAM;MAAAA,wBAAQ;MAAAA,iBAAO;MACrBA,0BAA6B;MAC7BA,iEASM;MACNA,mFAIe;MACfA,mFAKe;MACjBA,iBAAc;;;MArBNA,eAAsB;MAAtBA,+CAAsB;MAUbA,eAAgB;MAAhBA,qCAAgB;MAKhBA,eAAiB;MAAjBA,sCAAiB;;;iBDF9BN,YAAY,uBAEZE,gBAAgB,iBAChBC,aAAa,cACbC,eAAe;EAAAyB;AAAA","names":["CommonModule","takeUntil","MatToolbarModule","MatIconModule","MatButtonModule","DestroyService","i0","ToolbarComponent","constructor","viewDestroyed$","router","authService","onLoginClicked","navigate","onLogoutClicked","logout","pipe","subscribe","isLoggedIn","user","selectors","inputs","accounts","standalone","features","decls","vars","consts","template","styles"],"sourceRoot":"","sources":["/home/eagold/MyFiles/FASystem/FASystemClient/src/app/layouts/components/toolbar/toolbar.component.ts","/home/eagold/MyFiles/FASystem/FASystemClient/src/app/layouts/components/toolbar/toolbar.component.html"],"sourcesContent":["import { Component, Inject, Input, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Router } from '@angular/router';\n\nimport { takeUntil, Observable } from 'rxjs';\n\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { AuthService, UserInterface } from '@features/users';\nimport { DestroyService } from '@core/services';\nimport { AccountInterface } from '@features/accounts';\nimport { AccountsComponent } from './accounts';\n\n@Component({\n  selector: 'app-toolbar',\n  standalone: true,\n  imports: [\n    CommonModule,\n\n    MatToolbarModule,\n    MatIconModule,\n    MatButtonModule,\n\n    AccountsComponent\n  ],\n  providers: [\n    DestroyService\n  ],\n  templateUrl: 'toolbar.component.html',\n  styleUrls: [\n    'toolbar.component.scss'\n  ]\n})\nexport class ToolbarComponent {\n  @Input() user: UserInterface | null = null;\n  @Input() accounts: AccountInterface[] | null = [];\n  \n  constructor(\n    @Inject(DestroyService) private readonly viewDestroyed$: Observable<void>,\n    private readonly router: Router,\n    private readonly authService: AuthService\n  ) { }\n\n  onLoginClicked() {\n    this.router.navigate(['login']);\n  }\n\n  onLogoutClicked() {\n    this.authService.logout()\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe(() => {\n        this.router.navigate(['']); \n      });\n  }\n\n  get isLoggedIn() {\n    return this.user != null;\n  }\n}\n","<mat-toolbar color=\"primary\">\n  <button mat-icon-button>\n    <mat-icon>menu</mat-icon>\n  </button>\n  <span>FASystem</span>\n  <span class=\"spaicer\"></span>\n  <div *ngIf=\"user && accounts\" class=\"content\">\n    <div class=\"accounts\">\n      <ng-container *ngFor=\"let account of accounts\" class=\"accounts\">\n        <div>{{account.balance}}</div>\n      </ng-container>\n    </div>\n    <div>\n      {{user.name}} - {{user.login}}\n    </div>\n  </div>\n  <ng-container *ngIf=\"isLoggedIn\">\n    <button (click)=\"onLogoutClicked()\" mat-icon-button>\n      <mat-icon>logout</mat-icon>\n    </button>\n  </ng-container>\n  <ng-container *ngIf=\"!isLoggedIn\">\n    <span>Login</span>\n    <button (click)=\"onLoginClicked()\" mat-icon-button>\n      <mat-icon>login</mat-icon>\n    </button>\n  </ng-container>\n</mat-toolbar>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}