{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AgGridModule } from 'ag-grid-angular';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { DestroyService } from '@core/services';\nlet TransactionsComponent = class TransactionsComponent {\n  constructor(viewDestroyed$, transactionsService, router, route) {\n    this.viewDestroyed$ = viewDestroyed$;\n    this.transactionsService = transactionsService;\n    this.router = router;\n    this.route = route;\n    this.expenses = new Loadable(null, false);\n    this.selected = [];\n    this.defaultColDef = {\n      resizable: true,\n      sortable: true,\n      filter: true\n    };\n    this.gridOptions = {\n      suppressRowClickSelection: true,\n      rowHeight: 48\n    };\n  }\n  ngOnInit() {\n    this.setCoumnDefs();\n    this.updateExpenses();\n  }\n  setCoumnDefs() {\n    this.columnDefs = [{\n      field: 'id',\n      headerCheckboxSelection: true,\n      checkboxSelection: true\n    }, {\n      field: 'amount'\n    }, {\n      field: 'description'\n    }, {\n      field: 'categoryName',\n      headerName: 'Category'\n    }, {\n      field: 'accountName',\n      headerName: 'Account'\n    }, {\n      field: 'typeId',\n      headerName: 'Type Id',\n      hide: true\n    }, {\n      headerName: 'Controls',\n      pinned: 'right',\n      cellRenderer: TemplateRendererComponent,\n      cellRendererParams: {\n        template: this.controlsTemplate\n      }\n    }];\n  }\n  onGridReady(params) {\n    this.gridApi = params.api;\n    this.gridColumnApi = params.columnApi;\n  }\n  onFirstDataRendered() {\n    this.gridColumnApi.autoSizeAllColumns();\n  }\n  onSelectionChanged(event) {\n    this.selected = event.api.getSelectedRows();\n  }\n  onNewClicked() {\n    this.router.navigate(['new'], {\n      relativeTo: this.route\n    });\n  }\n  onRowClicked(expense) {}\n  onRowEditClicked(expense) {\n    this.router.navigate([expense.id], {\n      relativeTo: this.route\n    });\n  }\n  resetSelected() {\n    this.selected = [];\n  }\n  updateExpenses() {\n    this.expenses.isLoading = true;\n    this.transactionsService.getAll().pipe(takeUntil(this.viewDestroyed$)).subscribe({\n      next: data => {\n        this.expenses.setData(data);\n      },\n      error: error => this.expenses.setError(error)\n    });\n  }\n};\n__decorate([ViewChild('controlsTemplate', {\n  static: true\n})], TransactionsComponent.prototype, \"controlsTemplate\", void 0);\nTransactionsComponent = __decorate([Component({\n  selector: 'app-transactions',\n  standalone: true,\n  imports: [CommonModule, AgGridModule, MatButtonModule, MatIconModule],\n  providers: [DestroyService],\n  templateUrl: './transactions.component.html',\n  styleUrls: ['./transactions.component.scss']\n}), __param(0, Inject(DestroyService))], TransactionsComponent);\nexport { TransactionsComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","CommonModule","AgGridModule","MatButtonModule","MatIconModule","DestroyService","TransactionsComponent","constructor","viewDestroyed$","transactionsService","router","route","Loadable","resizable","sortable","filter","suppressRowClickSelection","rowHeight","ngOnInit","setCoumnDefs","updateExpenses","columnDefs","field","headerCheckboxSelection","checkboxSelection","headerName","hide","pinned","cellRenderer","TemplateRendererComponent","cellRendererParams","template","controlsTemplate","onGridReady","params","gridApi","api","gridColumnApi","columnApi","onFirstDataRendered","autoSizeAllColumns","onSelectionChanged","event","selected","getSelectedRows","onNewClicked","navigate","relativeTo","onRowClicked","expense","onRowEditClicked","id","resetSelected","expenses","isLoading","getAll","pipe","takeUntil","subscribe","next","data","setData","error","setError","__decorate","static","selector","standalone","imports","providers","templateUrl","styleUrls","__param"],"sourceRoot":"","sources":["/home/eagold/MyFiles/FASystem/FASystemClient/src/app/features/transactions/components/transactions/transactions.component.ts"],"sourcesContent":["import { Component, TemplateRef, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AgGridModule } from 'ag-grid-angular';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { DestroyService } from '@core/services';\n\n@Component({\n  selector: 'app-transactions',\n  standalone: true,\n  imports: [\n    CommonModule,\n\n    AgGridModule,\n\n    MatButtonModule,\n    MatIconModule,\n  ],\n  providers: [\n    DestroyService\n  ],\n  templateUrl: './transactions.component.html',\n  styleUrls: ['./transactions.component.scss']\n})\nexport class TransactionsComponent {\n  @ViewChild('controlsTemplate', { static: true }) controlsTemplate!: TemplateRef<any>;\n  expenses = new Loadable<TransactionReadInterface[] | null>(null, false);\n  selected: TransactionReadInterface[] = [];\n\n  gridApi!: GridApi;\n  gridColumnApi!: ColumnApi;\n\n  columnDefs!: ColDef[];\n  defaultColDef = {\n    resizable: true,\n    sortable: true,\n    filter: true\n  };\n  gridOptions = {\n    suppressRowClickSelection: true,\n    rowHeight: 48\n  };\n\n  constructor(\n    @Inject(DestroyService) private readonly viewDestroyed$: Observable<void>,\n    private readonly transactionsService: TransactionsService,\n    private readonly router: Router,\n    private route: ActivatedRoute,\n  ) { }\n\n  ngOnInit(): void {\n    this.setCoumnDefs();\n    this.updateExpenses();\n  }\n\n  setCoumnDefs(): void {\n    this.columnDefs = [\n      {\n        field: 'id',\n        headerCheckboxSelection: true,\n        checkboxSelection: true,\n      },\n      { field: 'amount' },\n      { field: 'description' },\n      { \n        field: 'categoryName',\n        headerName: 'Category'\n      },\n      { \n        field: 'accountName',\n        headerName: 'Account'\n      },\n      { \n        field: 'typeId',\n        headerName: 'Type Id',\n        hide: true\n      },\n      {\n        headerName: 'Controls',\n        pinned: 'right',\n        cellRenderer: TemplateRendererComponent,\n        cellRendererParams: {\n          template: this.controlsTemplate\n        }\n      }\n    ]\n  }\n\n  onGridReady(params: GridReadyEvent): void {\n    this.gridApi = params.api;\n    this.gridColumnApi = params.columnApi;\n  }\n\n  onFirstDataRendered(): void {\n    this.gridColumnApi.autoSizeAllColumns();\n  }\n\n  onSelectionChanged(event: SelectionChangedEvent) {\n    this.selected = event.api.getSelectedRows();\n  }\n\n  onNewClicked() {\n    this.router.navigate(['new'], { relativeTo: this.route });\n  }\n\n  onRowClicked(expense: TransactionReadInterface): void {\n\n  }\n\n  onRowEditClicked(expense: TransactionReadInterface): void {\n    this.router.navigate([expense.id], { relativeTo: this.route });\n  }\n\n  resetSelected(): void {\n    this.selected = [];\n  }\n\n  updateExpenses(): void {\n    this.expenses.isLoading = true;\n    this.transactionsService.getAll()\n      .pipe(takeUntil(this.viewDestroyed$))\n      .subscribe({\n        next: data => {\n          this.expenses.setData(data);\n        },\n        error: error => this.expenses.setError(error)\n      });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}